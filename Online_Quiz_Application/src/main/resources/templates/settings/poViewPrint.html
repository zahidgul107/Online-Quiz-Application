<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymleaf.org">
<head>
<!-- basic -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- mobile metas -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="viewport" content="initial-scale=1, maximum-scale=1">
<!-- site metas -->
<title>Print Purchase Order</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">
<!-- site icon -->
<link rel="icon" th:href="@{/images/fevicon.png}" type="image/png" />
<!-- bootstrap css -->
<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
<link rel="stylesheet" th:href="@{/css/font-awesome.min.css}" />
<!-- select bootstrap -->
<link rel="stylesheet" th:href="@{/css/bootstrap-select.css}" />
<!-- calendar file css -->
<link rel="stylesheet" th:href="@{/js/semantic.min.css}" />
<!-- site css -->
<link rel="stylesheet" th:href="@{/css/style.css}" />
<!-- responsive css -->
<link rel="stylesheet" th:href="@{/css/responsive.css}" />
<!-- color css -->
<link rel="stylesheet" th:href="@{/css/colors.css}" />

<!-- scrollbar css -->
<link rel="stylesheet" th:href="@{/css/perfect-scrollbar.css}" />
<!-- custom css -->
<link rel="stylesheet" th:href="@{/css/custom.css}" />


<script type="text/javascript">
	/* 	window.print(); */

	function printDiv(divName) {
		document.getElementById('printableArea').style.display = "block";
		// Store the current CSS media type
		/* var originalMediaType = document.body.style.media;
		document.body.style.media = "print"; // Set the media type to 'print'

		var printContents = document.getElementById(divName).innerHTML;
		var originalContents = document.body.innerHTML;
		document.body.innerHTML = printContents; */
		 document.getElementById('printButton').style.display = 'none';
		 window.print();
	    document.getElementById('printButton').style.display = 'block';
		/* document.body.style.media = originalMediaType;
		document.body.innerHTML = originalContents; */
	}
</script>
<style>
.table th {
	background-color: #D3D3D3;
}
#tbl th, #tbl td {
	border: 1px solid black !important;
}

@media print {
	tr {
		page-break-inside: avoid;
	}
}

@page {
	margin-top: 2rem !important;
	margin-bottom: 0px !important;
}
</style>
</head>
<body class="dashboard dashboard_1">
	<div class="full_container">
		<div class="inner_container">
			<!-- Sidebar  -->
			<div th:replace="fragments/sidebar :: sidebar"></div>

			<!-- end sidebar -->
			<!-- right content -->
			<div id="content">
				<!-- topbar -->
				<div th:replace="fragments/header :: myHeader"></div>

				<!-- end topbar -->

				<div class="container-fluid" id="printableArea">

					<div class="row mt-3">
						<div class="col-md-7 mt-4">

							<h3>
								<b th:text="${purchaseOrder.company.companyName}"></b>
							</h3>
							<h6 class="">
								<b
									th:text="${purchaseOrder.company.address + ', ' + purchaseOrder.company.country + ', ' + purchaseOrder.company.state +', '+ purchaseOrder.company.pincode}"></b>
							</h6>
							<h6 class="">
								<strong th:text="${purchaseOrder.company.phoneNumber}"></strong>
							</h6>
							<h6 class="">
								<a th:href="'mailto:' + ${purchaseOrder.company.email}"
									style="color: black; text-decoration: none;"> <strong
									th:text="${purchaseOrder.company.email}"></strong>
								</a>
							</h6>
							<h6 class="">
								<a th:href="${purchaseOrder.company.website}"
									style="color: black; text-decoration: none;"> <strong
									th:text="${purchaseOrder.company.website}"></strong>
								</a>
							</h6>
						</div>


						<div class="col-md-5 mt-4">
							<h1 class="text-right">
								<b>PURCHASE ORDER</b>
							</h1>
							<h6 class="text-right mt-2">
								<b>P.O NUMBER:</b> <strong class="ml-5"
									th:text="${purchaseOrder.poNumber}"></strong>
							</h6>
							<h6 class="text-right">
								<b>DATE:</b><strong class="ml-3" th:text="${purchaseOrder.date}"></strong>
							</h6>
						</div>



						<div class=" col-md-12 table table-responsive">
							<table class="table table-bordered mt-4" id="tbl">
								<thead>
									<tr>
										<th class="font-weight-bold" colspan="4">CUSTOMER</th>
										<th class="font-weight-bold" colspan="4">BILL TO</th>
										<th  class="font-weight-bold" colspan="4">DELIVER TO</th>

									</tr>
								</thead>
								<tbody>

									<tr>
										<td class="bb" colspan="4"
											th:text="${purchaseOrder.party.partyName}"></td>
										<td class="blrb" colspan="4"
											th:text="${purchaseOrder.party.partyName}"></td>
										<td class="bb" colspan="4"
											th:text="${purchaseOrder.party.partyName}"></td>
									</tr>
									<tr>

										<td class="bb" colspan="4"
											th:text="${purchaseOrder.party.address}"></td>
										<td class="blrb" colspan="4"
											th:text="${purchaseOrder.party.address}"></td>
										<td class="bb" colspan="4"
											th:text="${purchaseOrder.party.address}"></td>
									</tr>

									<tr>
										<td class="bb" colspan="4">Contact No:&nbsp;
										<strong	th:text="${purchaseOrder.party.phoneNumber}"></strong></td>
										<td class="blrb" colspan="4">Contact No:&nbsp;
										<strong	th:text="${purchaseOrder.party.phoneNumber}"></strong></td>
										<td class="bb" colspan="4">Contact No:&nbsp;
										<strong	th:text="${purchaseOrder.party.phoneNumber}"></strong></td>
									</tr>
									<tr>
										<td class="bb" colspan="4">Pin code:&nbsp;
										<strong	th:text="${purchaseOrder.party.pincode}"></strong></td>
										<td class="blrb" colspan="4">Pin code:&nbsp;
										<strong	th:text="${purchaseOrder.party.pincode}"></strong></td>
										<td class="bb" colspan="4">Pin code:&nbsp;
										<strong	th:text="${purchaseOrder.party.pincode}"></strong></td>

									</tr>

									<tr>
										<th colspan="3">START DATE</th>
										<th colspan="3">CANCEL DATE</th>
										<th colspan="3">END DATE</th>
										<th colspan="3">SHIPPED VIA</th>
										<!-- <th colspan="2">FOB</th>
                 <th colspan="2">TERMS</th> -->
									</tr>

									<tr>
										<td class="" colspan="3" th:text="${purchaseOrder.startDate}"></td>
										<td class="" colspan="3" th:text="${purchaseOrder.cancelDate}"></td>
										<td class="" colspan="3" th:text="${purchaseOrder.endDate}"></td>
										<td class="" colspan="3" th:text="${purchaseOrder.shippedVia}"></td>
										<!-- <td class="" colspan="2">  walmart</td>
		     <td class="" colspan="2"> 30</td> -->

									</tr>

									<tr>
										<th class="" colspan="2">UNIT</th>
										<th class="" colspan="6">DESCRIPTION</th>
										<th colspan="2" th:text="'Unit Price ('+${purchaseOrder.currency}+')'"></th>
										<th class="" colspan="2" th:text="'Amount ('+${purchaseOrder.currency}+')'"></th>
									</tr>

									<th:block th:each="poItem : ${purchaseOrder.poItems}">
										<tr>
											<td class="" colspan="2" th:text="${poItem.unit}"></td>
											<td class="" colspan="6" th:text="${poItem.description}"></td>
											<td class="" colspan="2" th:text="${poItem.unitPrice}"></td>
											<td class="" colspan="2" th:text="${poItem.amount}"></td>
										</tr>
									</th:block>

									<tr>
										<th class="" colspan="2">APPROVED BY</th>
										<th class="" colspan="4" th:text="${purchaseOrder.approvedBy}"></th>
										<td class="" colspan="2"><strong th:text="'SubTotal ('+${purchaseOrder.currency}+')'"></strong></td>
										<td class="" colspan="2"><strong></strong></td>
										<td class="" colspan="2"><strong class="subtotal"
											th:text="${purchaseOrder.subTotal}"></strong></td>
									</tr>

									<tr>
									 <td class="" colspan="6" rowspan="3"></td>
										<!-- <td class="" colspan="2"></d>
										<td class="" colspan="4"></td> -->
										<td class="" colspan="2"><strong>IGST (%)</strong></td>
										<td class="" colspan="2"><strong class="igst"
											th:text="${purchaseOrder.igst}"></strong></td>
										<td class="" colspan="2"><strong class="igstVal"></strong></td>
									</tr>
									<tr>
										<!-- <td class="" colspan="6" rowspan="4"><strong>AUTHORIZED
												SIGNATORY</strong></td> -->
										  
										<td class="" colspan="2"><strong>CGST (%)</strong></td>
										<td class="" colspan="2"><strong class="cgst"
											th:text="${purchaseOrder.cgst}"></strong></td>
										<td class="" colspan="2"><strong class="cgstVal"></strong></td>
									</tr>
									<tr>
										<!-- <td class="" colspan="2"><strong>END DATE </strong></td>
										<td class="" colspan="4" th:text="${purchaseOrder.endDate}"></td> -->
										<td class="" colspan="2"><strong>SGST(%)</strong></td>
										<td class="" colspan="2"><strong class="sgst"
											th:text="${purchaseOrder.sgst}"></strong></td>
										<td class="" colspan="2"><strong class="sgstVal"></strong></td>
									</tr>

									<tr>
									<td class=" text-center" colspan="6" rowspan="1"><strong>AUTHORIZED
												SIGNATORY</strong></td> 
										<!-- <td class="" colspan="2"></td>
										<td class="" colspan="4"></td> -->
										<th class="" colspan="2"><strong th:text="'Total Amount ('+${purchaseOrder.currency}+')'"></strong></th>
										<td class="" colspan="2"><strong></strong></td>
										<th class="" colspan="2"><strong
											th:text="${purchaseOrder.totalAmount}"></strong></th>
									</tr>

								</tbody>


							</table>

						</div>
						<div class="col-md-11  mt-3 p-4 float-right text-right"
							th:if="${purchaseOrder.company.imageName} != null">
								
								<div class=" col-md-11  float-right text-right">
									<div 
										style="height: 150px; width: 210px; border-radius: 4px; overflow: hidden;float: right;padding:5px;background-color:#f8f8f8;">
										<img 
											th:src="@{'/po/getimage/'+${purchaseOrder.company.imageName}}"
											height="150px" width="200px" >
									</div>
									
								</div>
								<h5 class="">
									<strong> Authorised Signatory</strong>
								</h5>
							</div>


					</div>

				</div>

				<div class="row m-5">
					<div class="col-lg-12 ">
						<button class="btn-primary float-right"
							onclick="printDiv('printableArea')" id="printButton">
							<i class="fa fa-print" aria-hidden="true"> Print</i>
						</button>

					</div>
				</div>

			</div>
		</div>
	</div>


	<!-- jQuery -->
	<script th:src="@{/js/jquery.min.js}"></script>
	<script th:src="@{/js/popper.min.js}"></script>
	<script th:src="@{/js/bootstrap.min.js}"></script>
	<!-- wow animation -->
	<script th:src="@{/js/animate.js}"></script>
	<script th:src="@{/js/dynamicField.js}"></script>
	<!-- select country -->
	<script th:src="@{/js/bootstrap-select.js}"></script>
	<!-- nice scrollbar -->
	<script th:src="@{/js/perfect-scrollbar.min.js}"></script>
	<!-- custom js -->
	<script th:src="@{/js/custom.js}"></script>
	<script>
		var ps = new PerfectScrollbar('#sidebar');

		calculateTotalTax();
		function calculateTotalTax() {
			var subTotal = parseFloat($('.subtotal').text());
			var igst = parseFloat($('.igst').text());
			var cgst = parseFloat($('.cgst').text());
			var sgst = parseFloat($('.sgst').text());

			var igstPercentage = (igst / 100) * subTotal;
			var cgstPercentage = (cgst / 100) * subTotal;
			var sgstPercentage = (sgst / 100) * subTotal;
			if (typeof cgstPercentage === 'undefined' || isNaN(cgstPercentage)) {
				cgstPercentage = 0;
			}
			if (typeof igstPercentage === 'undefined' || isNaN(igstPercentage)) {
				igstPercentage = 0;
			}
			if (typeof sgstPercentage === 'undefined' || isNaN(sgstPercentage)) {
				sgstPercentage = 0;
			}
			$('.igstVal').text(igstPercentage);
			$('.cgstVal').text(cgstPercentage);
			$('.sgstVal').text(sgstPercentage);

		}
	</script>
</body>
</html>
